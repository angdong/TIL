# 3.10 진단/체크리스트
- [3.10 진단/체크리스트](#310-진단체크리스트)
  - [이중화](#이중화)
  - [HA(고가용성)](#ha고가용성)
  - [안정성](#안정성)
  - [OS 설정](#os-설정)
  - [스토리지](#스토리지)
  - [백업](#백업)
  - [모니터링](#모니터링)
  - [용량](#용량)


아키텍처 취약점 체크리스트

## 이중화
필수
1. 주요 part 이중화
2. I/O 카드의 I/O Box별 분산 배치
3. multipath S/W를 통한 외장 스토리지 채널 이중화
4. N/W switch 이중화
5. mission critical 시스템은 서버 이중화(HA)
6. 하나의 Multiport I/O카드로 이중화 금지
7. 가상화 클러스터 구성 시 자원 사용량 고려하여 VM 분배
8. 가상화 클러스터 구성 시 이중화된 VM들은 다른 Host 서버 분배

권고
1. 가상화 클러스터의 Host 서버들은 동일 기종, 동일 펌웨어 사용

## HA(고가용성)
필수
1. RAC Interconnect N/W 구성 시 L2 switch 2개로 구성
2. RAC Interconnect N/W 구성 시 MTU9000 설정
3. Fail-over시 standby 서버 충분한 자원 필요
4. Fail-over시 standby 서버 자원 충돌하지 않도록 구성
5. Active-Standby 서버 구성 동기화
6. Heartbeat 채널 이중화
7. 균등한 load balancing
8. 상호 시간 동기화

권고
1. Active-Standby 서버는 물리적으로 다른 랙, 별도의 box로 구성

## 안정성
필수
1. 노후화된 H/W 교체 권고
2. OS, SW의 EOS(end of service) 되지 않도록 관리
3. 서버 용도에 따른 적절한 N/W 영역 배포
4. PC등 안정성 확보되지 않은 서버 사용 금지
5. 적절한 유지보수계약 여부 필요

## OS 설정
필수
1. Crash Dump 설정
2. 백신 프로그램 설치, 자동 업데이트 적용
3. Windows Update 정기 적용
4. 적정 Swap/Paging 용량
5. 적정 Time Zone
6. 시스템 시간 표준시 동기화 설정
7. 스위치와 맞는 Speed/Duplex, 1000/Full로 동작
8. 전원 관리 옵션: 고성능
9. Parameter 적정성
10. 올바른 네트워크 설정
11. 서버에 접속이 가능한 콘솔 환경 확인

## 스토리지
필수
1. 성능 요구사항에 따라 적절한 스토리지 선택
2. 적절한 레벨의 RAID 구성 및 Spare disk 필요
3. RAID 구성 후 usable 용량 부족하지 않은지 확인
4. 스토리지 성능에 따라 SAN switch, FC cable 적절히 선택
5. 관리용도의 IP 할당 및 network 연결 필요
6. 변경이 잦은 볼륨의 경우 snap 발생하는지 확인

권고
1. 스토리지 데이터 용량에 따라 필요시 4채널 이상으로 구성
2. NAS 데이터 용량에 따라 bonding 구성을 통해 대역폭 확보
3. NAS 데이터 용량에 따라 NAS용 N/W 구성
4. 고성능, 대용량 필요하거나 중요 서비스의 데이터는 외장 스토리지 구성 권고
5. 대용량 DB일 경우, Online 백업 위한 스토리지 내부복제 권고
6. 권고 펌웨어 업데이트 적용

## 백업
필수
1. 데이터 소실 후에도 서비스 복구 가능하도록 정책 구성
2. 백업에 필요한 툴, 모듈별 라이센스, 백업 장비 및 용량 확보
3. 수행 불가능한 백업, 반복적인 백업 실패, 만성적인 오류 있는지 점검
4. OS 백업 위한 SW 및 미디어, 저장공간 확보되어 있는지 점검

권고
1. 대용량 백업 필요한 경우 SAN Client 구성 필요
2. 목표 RTO/RPO 정의, 적절한 아키 도입
3. 백업 소요 시간 긴 DB 백업일 경우 스토리지 내부복제 구성
4. 대용량 NAS인 경우 NDMP 백업 검토

## 모니터링
필수
1. 실시간 모니터링 가능한 툴, 인력 여부
2. 모니터링 임계치 적정 여부
3. 필수 성능 정보 수집 여부
4. HW 정기적 육안점검 여부
5. 이벤트 로그 설정 여부
6. 이벤트 로그 특이사항 확인

## 용량
필수
1. 월말 영업일 기준 CPU 사용률 80% 초과 or 최고 CPU가 100%를 지속하는지 확인
2. CPU Run Queue가 CPU x 3 초과하는지 확인
3. 메모리 사용률 높고, page out 발생하는지 확인
4. 스토리지 증가 추세 대비 스토리지 용량 충분한지 확인
5. I/O wait, busy rate, service time등 디스크와의 I/O 관련 성능 지표 문제 없는지 확인
6. transmit/receive, dropped, collistion 등 네트워크 성능 지표에 문제 없는지 확인