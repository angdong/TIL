# 3.5 백업
- [3.5 백업](#35-백업)
  - [백업 방식](#백업-방식)
    - [백업 구성 방식](#백업-구성-방식)
  - [백업 장치](#백업-장치)
    - [cloud에서의 백업](#cloud에서의-백업)
  - [OS 백업](#os-백업)
  - [NDMP 백업](#ndmp-백업)
  - [DB 백업](#db-백업)
    - [내부 복제](#내부-복제)
  - [중복 제거](#중복-제거)
  - [데이터 센터 간 백업(DR)](#데이터-센터-간-백업dr)

RPO(recovery point objective)
* 어느 시점까지의 데이터를 복구할 수 있냐

RTO(recovery time objective)
* 얼마나 빠르게 복구를 완료할 수 있냐

## 백업 방식
* 전체 백업
  * 전체 데이터 백업
  * 간단 복구 가능
  * 백업에 시간/용량 가장 많이 소요
* 차등 증분 백업
  * 전체 백업 or 증분 백업 수행된 후의 변경 사항을 백업
  * 백업 데이터량 적고 백업 소요시간 짧음
  * 증분 백업 많을수록 복구에 오랜 시간 소요
* 누적 증분 백업
  * 전체 백업 이후에 변경된 데이터를 백업 받는 방식
  * 차등 증분 백업에 비해 빠른 시간안에 복구 가능
  * 차등 증분 백업에 비해 백업 데이터량이 커짐

### 백업 구성 방식
1. LAN 백업
2. SAN 백업
3. 서버 Free 백업

## 백업 장치
1. 독립적 백업
2. VTL 백업(virtual tape library)
3. 스토리지 복제 볼륨 백업

### cloud에서의 백업
주로 SnapShot 및 복제를 이용하여 구성

1. EC2 AMI
2. EBS Snapshot
3. S3 File System
4. $\dots$

## OS 백업
OS는 부트 영역이 포함되어 있어서 단순히 파일시스템의 파일만을 받는 것으로는 복구 불가

환경에 맞게 OS 백업 방안 수립 필요

## NDMP 백업
대용량의 NAS스토리지에서 서버를 경유하지 않고 직접 백업하는 방식

## DB 백업
DB 데이터파일 온라인 백업

운영중의 DB 데이터파일을 그대로 받으면 사용할 수 없음\
각 DBMS에서 제공하는 온라인 백업 방법을 사용

### 내부 복제
대용량 DB의 온라인 백업 부하 경감 위해 내부 복제 볼륨 사용

복제된 볼륨을 다른 서버에 마운트하여 백업함으로써 운영서버의 백업 부하 경감

긴급한 상황에서 복제 볼륨으로 DB Open 하거나 역방향 복제도 가능

## 중복 제거
disk 기반의 백업 장비에서 저장 용량을 줄이기 위해 중복 제거 기술 사용

1. 소스 기반 중복 제거
   * 서버에서 부하가 걸림
   * 전송량 적다는 장점
   * 소규모 DB, 변경량이 적은 경우 적합
2. 타겟 기반 중복 제거
   * 전송 데이터가 많이 대역폭 소모
   * 압축 효율이 높음(데이터를 모아서 중복제거)
   * 대규모 DB, 변경량이 많은 경우 적합

## 데이터 센터 간 백업(DR)
데이터 센터 down시 가용성을 확보하는 방안\
RTO/PRO에 따라 분류

1. Mirror site
2. Hot site
3. Warm site
4. Cold site