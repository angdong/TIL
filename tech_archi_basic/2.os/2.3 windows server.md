# 2.3 Windows Server
- [2.3 Windows Server](#23-windows-server)
  - [Windows 부팅](#windows-부팅)
    - [Windows 부팅 단계](#windows-부팅-단계)
  - [Windows 구성](#windows-구성)
    - [Windows 세션](#windows-세션)
    - [윈도우 스테이션](#윈도우-스테이션)
    - [데스크탑](#데스크탑)
    - [사용자 및 그룹](#사용자-및-그룹)
  - [Windows 파일 시스템](#windows-파일-시스템)
    - [파티션](#파티션)
    - [기본 디스크, 동적 디스크](#기본-디스크-동적-디스크)
    - [저장소 공간](#저장소-공간)
    - [저장소 공간 다이렉트(Sotrage Spaces Direct, S2D)](#저장소-공간-다이렉트sotrage-spaces-direct-s2d)
    - [저장소 복제본](#저장소-복제본)
  - [프로세스](#프로세스)
    - [Windows service](#windows-service)
    - [작업 스케줄러](#작업-스케줄러)
    - [이벤트 로그](#이벤트-로그)


Windows Server\
MS에서 제작하는 서버용 운영체제를 뜻함

## Windows 부팅

### Windows 부팅 단계
1. Power ON/POST
2. BIOS/UEFI
3. BOOTMGR 실행\
   BIOS-부팅 디스크의 MBR영역 참고하여 실행\
   UEFI-부팅 파티션에서 바로 실행
4. 멀티부팅 선택\
   OS가 2개 이상 설치되어 있을 시 멀티부팅 선택 가능
5. Windows Loader 실행\
   Windows Loader가 실행됨\
   Windows Loader는 레지스트리 시스템 정보 읽어서 H/W 드라이버 로딩시킴
6. 세션 환경 구성\
   시스템 환경을 설정에 맞게 초기화 하고 세션들을 실행
7. 로그온 화면\
   로그온 화면 표시

## Windows 구성

```
세션
   ㄴ윈도우 스테이션
        ㄴ데스크탑
            ㄴ프로세스

    ㄴ윈도우 스테이션
        ㄴ데스크탑
            ㄴ프로세스
        ...
...
```

### Windows 세션
Windows에서 프로세스는 1개의 세션에 속하고, 한 번 시작된 프로세스는 세션을 변경 불가

첫 번째 세션인 세션 0번은 사용자와 격리됨

세션 0번은 시스템 프로세스와 Windows 서비스들이 시작

세션 1번부터 로그온 한 사용자의 프로그램이 시작

### 윈도우 스테이션

하나의 세션 내에 여러 개의 윈도우 스테이션으로 작업 환경 분리

프로세스는 **같은 윈도우 스테이션** 내의 데스크탑, 클립보드에 접근 가능

프로세스 생성 시 자신과 연결될 윈도우 스테이션을 설정하거나 생성

프로세스는 속한 윈도우 스테이션을 같은 세션 내에서 변경 가능

### 데스크탑

커널에 로드되는 논리적인 디스플레이 화면

각 윈도우 스테이션은 데스크탑 여러개 가질 수 있음

윈도우 스테이션 0번에는 사용자의 I/O 가능한 데스크탑 존재
1. 로그온 데스크탑
2. 기본 데스크탑
3. 화면 보호기
4. 보안 데스크탑\
   -> 한 번에 하나만 활성화 가능

### 사용자 및 그룹
독립 실행형 서버는 로컬 사용자, 로컬 그룹 사용

AD(Active Directory) 멤버로 조인되면 AD의 사용자와 그룹을 사용

빌트인 로컬 사용자
* 기본적으로 생성되어 있음
* (Administrator / Guest)

기본 로컬 그룹
* 기본으로 생성되어 있음
* 주요 그룹
  * Administrators
  * Backup Operators
  * Guests
  * IIS_IUSRS
  * Power Users
  * Remote Desktop Users
  * Users

Windows 사용자 특징

삭제된 계정과 동일한 이름으로 재생성해도 다른 계정으로 인식
   * 고유의 보안 식별자 존재

사용자 계정 컨트롤(UAC)
    * 권한 상승 절차 3가지
      * 관리자
      * 관리자 그룹에 속한 사용자가 "예" 선택
      * 관리자 그룹에 속하지 않은 사용자가 패스워드 인증

Windows 파일 권한
* 권한 종류(6)
  * 수정
  * 읽기 및 실행
  * 폴더 내용 보기
  * 읽기
  * 쓰기
  * 모든 권한

Windows 공유 권한
* 권한 종류
  * 읽기
  * 수정
  * 모든 권한

## Windows 파일 시스템
### 파티션
인식된 디스크를 파티션으로 나누어 사용

디스크 초기화 시 MBR과 GPT형식 중 선택

파티션 뒤로 사용하지 않는 공간이 있다면 확장이 가능

### 기본 디스크, 동적 디스크
기본 디스크: 파티션을 그대로 파일시스템으로 사용

동적 디스크: LVM 처럼 미러, 스트라이프, 스팬 등을 적용하여 사용\
OS용으로는 사용 불가, 다시 기본 디스크로 사용 불가

동적 디스크 종류
1. 스팬 볼륨
2. 스트라이프 볼륨
3. 미러 볼륨
4. RAID-5 볼륨

### 저장소 공간
여러 개의 물리적 디스크 모아서 사용자에게 새로운 논리적 디스크로 제공

논리적 디스크는 자유롭게 용량 증설

물리적 디스크의 총 용량보다 더 큰 논리적 공간 생성 가능
### 저장소 공간 다이렉트(Sotrage Spaces Direct, S2D)
로컬 디스크로 HA구성 가능

### 저장소 복제본
저장소를 두 장소에 동일하게 복제(재해 복구 개념)

## 프로세스

Windows Process
* 프로그램 실행 위한 자원들의 컨테이너
* 한 개 이상의 쓰레드로 구성, 쓰레드는 프로세스 컨테이너에 의해 참조되는 자원들에 대한 권한이 있음
* Linux와는 달리 부모 프로세스가 먼저 종료되어도 정보 갱신 X
* 실제로 실행되는 것은 쓰레드, 프로세스는 단순히 쓰레드의 컨테이너이다
  
사용자 모드와 커널 모드
* OS데이터 보호 위해 사용자 모드/커널 모드 사용
* 시스템 프로세스가 아닌 모든 프로세스는 사용자 모드에서 실행
* 장치 드라이버, 실행부, 커널 등 **OS 요소들은 커널 모드에서 실행**
* 사용자 모드의 프로세스는 시스템 서비스 호출을 할 때 **커널 모드로 전환**

### Windows service
사용자의 인터페이스 없이 백그라운드로 실행, 사용자 로그인 및 세션 종료에 영향 받지 않음

사용자는 서비스를 시작/중지/일시중지/다시시작 가능

### 작업 스케줄러
Windows OS 예약 작업 관리

Powershell은 기본적으로 스크립트 실행 못하는 정책이 적용되어 있어, 작업 관리자에 등록하려면 해당 정책을 `RemoteSigned` 로 변경하여 사용하여야 함

### 이벤트 로그
H/W 및 S/W에서 발생하는 이벤트들 로깅

로그 종류: 응용프로그램, 보안, 설정, 시스템, 전달된 이벤트

로그 수준: **정보 > 경고 > 오류 > 위험**